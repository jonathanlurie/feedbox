{"version":3,"file":"feedbox.js","sources":["../src/Feedbox.js","../src/main.js"],"sourcesContent":["/*\n* Author    Jonathan Lurie - http://me.jonahanlurie.fr\n* License   MIT\n* Link      https://github.com/jonathanlurie/feedblock\n* Lab       MCIN - http://mcin.ca/ - Montreal Neurological Institute\n*/\n\n\n\nclass Feedbox {\n\n  constructor( yourEmail ) {\n    this._yourEmail = yourEmail;\n    this._buildForm();\n  }\n\n\n  _buildForm(){\n    var that = this;\n    \n    var wrapperDiv = document.createElement('div');\n    \n    var width = 250;\n    var height = 300;\n    var space = 5;\n    \n    var bottomWhenHidden = height * -1 + 20;\n    var bottomWhenShown = -48;\n    \n    // wrapperDiv.appendChild\n    wrapperDiv.style.zIndex = 1000000;\n    wrapperDiv.style.width = width;\n    wrapperDiv.style.height = height;\n    wrapperDiv.style.position = \"fixed\";\n    wrapperDiv.style.left = 0;\n    wrapperDiv.style.margin = 10;\n    wrapperDiv.style.bottom = bottomWhenHidden;\n    wrapperDiv.style.backgroundColor = \"rgb(134, 208, 201)\";\n    wrapperDiv.style.padding = space;\n    wrapperDiv.style.cursor = \"pointer\";\n    wrapperDiv.style.transition = \"all 0.2s\";\n    wrapperDiv.style.userSelect = \"none\"; \n    wrapperDiv.style.webkitUserSelect = \"none\";\n    wrapperDiv.style.mozUserSelect = \"none\";\n    wrapperDiv.style.msUserSelect = \"none\";\n    wrapperDiv.folded = true;\n    document.body.appendChild( wrapperDiv );\n    \n    // top div\n    var nameDiv = document.createElement('div');\n    nameDiv.style.width = \"100%\";\n    nameDiv.style.height = 30;\n    nameDiv.style.marginBottom = 5;\n    nameDiv.style.fontSize = \"1.8em\";\n    nameDiv.style.fontWeight = 900;\n    nameDiv.style.textTransform = \"uppercase\";\n    nameDiv.style.color = \"#FFF\";\n    nameDiv.style.textAlign = \"center\";\n    nameDiv.style.fontFamily = \"sans-serif\";\n    nameDiv.innerHTML = \"feedbox\";\n    wrapperDiv.appendChild( nameDiv );\n    \n    \n    nameDiv.addEventListener(\"click\", function(e){\n      if( wrapperDiv.folded ){\n        wrapperDiv.style.bottom = bottomWhenShown;\n        wrapperDiv.folded = false;\n      }else{\n        wrapperDiv.style.bottom = bottomWhenHidden;\n        wrapperDiv.folded = true;\n      }\n    });\n    \n    // form\n    var inputEmail = document.createElement('input');\n    var content = document.createElement('textarea');\n    var submitBt = document.createElement('div');\n    \n    inputEmail.type = \"email\";\n    inputEmail.name = \"email\";\n    inputEmail.placeholder = \"Your email\";\n    content.name = \"message\";\n    content.placeholder = \"Your message\";\n    //submitBt.type = \"submit\";\n    submitBt.innerHTML = \"SEND\";\n    wrapperDiv.appendChild( inputEmail );\n    wrapperDiv.appendChild( content );\n    wrapperDiv.appendChild( submitBt );\n    \n    inputEmail.style.width = \"100%\";\n    inputEmail.style.border = \"none\";\n    inputEmail.style.height = 25;\n    inputEmail.style.backgroundColor = \"#FFF\";\n    inputEmail.style.fontFamily = \"sans-serif\";\n    inputEmail.style.marginBottom = space;\n    inputEmail.style.padding = 5;\n    content.style.width = \"100%\";\n    content.style.border = \"none\";\n    content.style.marginBottom = space;\n    content.style.resize = \"none\";\n    content.rows = 10;\n    content.style.backgroundColor = \"#FFF\";\n    content.style.padding = 5;\n    submitBt.style.width = \"100%\";\n    submitBt.style.height = 22;\n    submitBt.style.backgroundColor = \"rgba(0, 0, 0, 0.2)\";\n    submitBt.style.paddingTop = 7;\n    submitBt.style.textAlign = \"center\";\n    submitBt.style.color = \"#FFF\";\n    submitBt.style.fontFamily = \"sans-serif\";\n    submitBt.style.fontSize = \"1em\";\n    submitBt.style.fontWeight = \"900\";\n    submitBt.style.marginBottom = space;\n    \n    submitBt.addEventListener(\"mouseover\", function(e){\n      submitBt.style.backgroundColor = \"rgba(0, 0, 0, 0.3)\";\n    })\n    \n    submitBt.addEventListener(\"mouseleave\", function(e){\n      submitBt.style.backgroundColor = \"rgba(0, 0, 0, 0.2)\";\n    })\n    \n    \n    function successSending(){\n      nameDiv.click();\n      content.value = \"\";\n      inputEmail.value = \"\";\n      alert(\"Your message was sent!\")\n    }\n    \n    \n    function failSending(){\n      nameDiv.click();\n      alert(\"The message could not be sent.\\nAre you sure the email address is correct?\")\n    }\n    \n    submitBt.addEventListener(\"click\", function(e){\n      var data = {\n        message: content.value,\n        email: inputEmail.value,\n        url: window.location.href\n      }\n      \n      if( data.email == \"\"){\n        failSending()\n        return;\n      }\n      \n      \n      console.log( data );\n      \n      \n      var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance \n      xmlhttp.open(\"POST\", \"http://formspree.io/\" + that._yourEmail);\n      xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\n      xmlhttp.send(JSON.stringify(data));\n      \n      \n      xmlhttp.onreadystatechange = function() {\n        console.log( this );\n        if (this.readyState == 4) {\n          \n          \n          if( this.status == 200 ){\n            console.log(\"SENT OK\");\n            successSending();\n          }else{\n            console.warn(\"ERROR\");\n            failSending();\n          }\n          \n        }else{\n          console.warn('still waiting...');\n        }\n      };\n\n      \n    });\n    \n    \n    \n    \n    \n  }\n  \n  \n  \n\n}\n\nexport { Feedbox };\n","// but we just want to make it accessible:\nexport { Feedbox } from './Feedbox.js'; \n"],"names":["Feedbox","yourEmail","_yourEmail","_buildForm","that","wrapperDiv","document","createElement","width","height","space","bottomWhenHidden","bottomWhenShown","style","zIndex","position","left","margin","bottom","backgroundColor","padding","cursor","transition","userSelect","webkitUserSelect","mozUserSelect","msUserSelect","folded","body","appendChild","nameDiv","marginBottom","fontSize","fontWeight","textTransform","color","textAlign","fontFamily","innerHTML","addEventListener","e","inputEmail","content","submitBt","type","name","placeholder","border","resize","rows","paddingTop","successSending","click","value","failSending","data","window","location","href","email","log","xmlhttp","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","onreadystatechange","readyState","status","warn"],"mappings":"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"}