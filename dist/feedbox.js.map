{"version":3,"file":"feedbox.js","sources":["../src/Feedbox.js","../src/main.js"],"sourcesContent":["/*\n* Author    Jonathan Lurie - http://me.jonahanlurie.fr\n* License   MIT\n* Link      https://github.com/jonathanlurie/feedblock\n* Lab       MCIN - http://mcin.ca/ - Montreal Neurological Institute\n*/\n\n\n\nclass Feedbox {\n\n  constructor( yourEmail ) {\n    this._yourEmail = yourEmail;\n    this._buildForm();\n  }\n\n\n  _buildForm(){\n    var that = this;\n    \n    var wrapperDiv = document.createElement('div');\n    \n    var width = 250;\n    var height = 300;\n    var space = 5;\n    \n    var bottomWhenHidden = height * -1 + 20;\n    var bottomWhenShown = -48;\n    \n    // wrapperDiv.appendChild\n    wrapperDiv.style.zIndex = 1000000;\n    wrapperDiv.style.width = width;\n    wrapperDiv.style.height = height;\n    wrapperDiv.style.position = \"fixed\";\n    wrapperDiv.style.left = 0;\n    wrapperDiv.style.margin = 10;\n    wrapperDiv.style.bottom = bottomWhenHidden;\n    wrapperDiv.style.backgroundColor = \"rgb(134, 208, 201)\";\n    wrapperDiv.style.padding = space;\n    wrapperDiv.style.cursor = \"pointer\";\n    wrapperDiv.style.transition = \"all 0.2s\";\n    wrapperDiv.style.userSelect = \"none\"; \n    wrapperDiv.style.webkitUserSelect = \"none\";\n    wrapperDiv.style.mozUserSelect = \"none\";\n    wrapperDiv.style.msUserSelect = \"none\";\n    wrapperDiv.folded = true;\n    document.body.appendChild( wrapperDiv );\n    \n    // top div\n    var nameDiv = document.createElement('div');\n    nameDiv.style.width = \"100%\";\n    nameDiv.style.height = 30;\n    nameDiv.style.marginBottom = 5;\n    nameDiv.style.fontSize = \"1.8em\";\n    nameDiv.style.fontWeight = 900;\n    nameDiv.style.textTransform = \"uppercase\";\n    nameDiv.style.color = \"#FFF\";\n    nameDiv.style.textAlign = \"center\";\n    nameDiv.style.fontFamily = \"sans-serif\";\n    nameDiv.innerHTML = \"feedbox\";\n    wrapperDiv.appendChild( nameDiv );\n    \n    \n    nameDiv.addEventListener(\"click\", function(e){\n      if( wrapperDiv.folded ){\n        wrapperDiv.style.bottom = bottomWhenShown;\n        wrapperDiv.folded = false;\n      }else{\n        wrapperDiv.style.bottom = bottomWhenHidden;\n        wrapperDiv.folded = true;\n      }\n    });\n    \n    // form\n    var inputEmail = document.createElement('input');\n    var content = document.createElement('textarea');\n    var submitBt = document.createElement('div');\n    \n    inputEmail.type = \"email\";\n    inputEmail.name = \"email\";\n    inputEmail.placeholder = \"Your email\";\n    content.name = \"message\";\n    content.placeholder = \"Your message\";\n    //submitBt.type = \"submit\";\n    submitBt.innerHTML = \"SEND\";\n    wrapperDiv.appendChild( inputEmail );\n    wrapperDiv.appendChild( content );\n    wrapperDiv.appendChild( submitBt );\n    \n    inputEmail.style.width = \"100%\";\n    inputEmail.style.border = \"none\";\n    inputEmail.style.height = 25;\n    inputEmail.style.backgroundColor = \"#FFF\";\n    inputEmail.style.fontFamily = \"sans-serif\";\n    inputEmail.style.marginBottom = space;\n    inputEmail.style.padding = 5;\n    content.style.width = \"100%\";\n    content.style.border = \"none\";\n    content.style.marginBottom = space;\n    content.style.resize = \"none\";\n    content.rows = 10;\n    content.style.backgroundColor = \"#FFF\";\n    content.style.padding = 5;\n    submitBt.style.width = \"100%\";\n    submitBt.style.height = 22;\n    submitBt.style.backgroundColor = \"rgba(0, 0, 0, 0.2)\";\n    submitBt.style.paddingTop = 7;\n    submitBt.style.textAlign = \"center\";\n    submitBt.style.color = \"#FFF\";\n    submitBt.style.fontFamily = \"sans-serif\";\n    submitBt.style.fontSize = \"1em\";\n    submitBt.style.fontWeight = \"900\";\n    submitBt.style.marginBottom = space;\n    \n    submitBt.addEventListener(\"mouseover\", function(e){\n      submitBt.style.backgroundColor = \"rgba(0, 0, 0, 0.3)\";\n    })\n    \n    submitBt.addEventListener(\"mouseleave\", function(e){\n      submitBt.style.backgroundColor = \"rgba(0, 0, 0, 0.2)\";\n    })\n    \n    \n    function successSending(){\n      nameDiv.click();\n      content.value = \"\";\n      inputEmail.value = \"\";\n      alert(\"Your message was sent!\")\n    }\n    \n    \n    function failSending(){\n      nameDiv.click();\n      alert(\"The message could not be sent.\\nAre you sure the email address is correct?\")\n    }\n    \n    submitBt.addEventListener(\"click\", function(e){\n      var data = {\n        message: content.value,\n        email: inputEmail.value,\n        url: window.location.href\n      }\n      \n      if( data.email == \"\"){\n        failSending()\n        return;\n      }\n      \n      \n      console.log( data );\n      \n      \n      var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance \n      xmlhttp.open(\"POST\", \"http://formspree.io/\" + that._yourEmail);\n      xmlhttp.setRequestHeader(\"Content-Type\", \"application/json\");\n      xmlhttp.send(JSON.stringify(data));\n      \n      \n      xmlhttp.onreadystatechange = function() {\n        console.log( this );\n        if (this.readyState == 4) {\n          \n          \n          if( this.status == 200 ){\n            console.log(\"SENT OK\");\n            successSending();\n          }else{\n            console.warn(\"ERROR\");\n            failSending();\n          }\n          \n        }else{\n          console.warn('still waiting...');\n        }\n      };\n\n      \n    });\n    \n    \n    \n    \n    \n  }\n  \n  \n  \n\n}\n\nexport { Feedbox };\n","// but we just want to make it accessible:\nexport { Feedbox } from './Feedbox.js'; \n"],"names":[],"mappings":";;;;;;AAAA;;;;;;;;;AASA,MAAM,OAAO,CAAC;;EAEZ,WAAW,EAAE,SAAS,GAAG;IACvB,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;IAC5B,IAAI,CAAC,UAAU,EAAE,CAAC;GACnB;;;EAGD,UAAU,EAAE;IACV,IAAI,IAAI,GAAG,IAAI,CAAC;;IAEhB,IAAI,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;;IAE/C,IAAI,KAAK,GAAG,GAAG,CAAC;IAChB,IAAI,MAAM,GAAG,GAAG,CAAC;IACjB,IAAI,KAAK,GAAG,CAAC,CAAC;;IAEd,IAAI,gBAAgB,GAAG,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;IACxC,IAAI,eAAe,GAAG,CAAC,EAAE,CAAC;;;IAG1B,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC;IAClC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;IAC/B,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;IACjC,UAAU,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC;IACpC,UAAU,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC;IAC1B,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;IAC7B,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,gBAAgB,CAAC;IAC3C,UAAU,CAAC,KAAK,CAAC,eAAe,GAAG,oBAAoB,CAAC;IACxD,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;IACjC,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;IACpC,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,UAAU,CAAC;IACzC,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC;IACrC,UAAU,CAAC,KAAK,CAAC,gBAAgB,GAAG,MAAM,CAAC;IAC3C,UAAU,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;IACxC,UAAU,CAAC,KAAK,CAAC,YAAY,GAAG,MAAM,CAAC;IACvC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC;IACzB,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,UAAU,EAAE,CAAC;;;IAGxC,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC5C,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;IAC7B,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;IAC1B,OAAO,CAAC,KAAK,CAAC,YAAY,GAAG,CAAC,CAAC;IAC/B,OAAO,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC;IACjC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC;IAC/B,OAAO,CAAC,KAAK,CAAC,aAAa,GAAG,WAAW,CAAC;IAC1C,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;IAC7B,OAAO,CAAC,KAAK,CAAC,SAAS,GAAG,QAAQ,CAAC;IACnC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,YAAY,CAAC;IACxC,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;IAC9B,UAAU,CAAC,WAAW,EAAE,OAAO,EAAE,CAAC;;;IAGlC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;MAC3C,IAAI,UAAU,CAAC,MAAM,EAAE;QACrB,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,eAAe,CAAC;QAC1C,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;OAC3B,IAAI;QACH,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,gBAAgB,CAAC;QAC3C,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC;OAC1B;KACF,CAAC,CAAC;;;IAGH,IAAI,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;IACjD,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;IACjD,IAAI,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;;IAE7C,UAAU,CAAC,IAAI,GAAG,OAAO,CAAC;IAC1B,UAAU,CAAC,IAAI,GAAG,OAAO,CAAC;IAC1B,UAAU,CAAC,WAAW,GAAG,YAAY,CAAC;IACtC,OAAO,CAAC,IAAI,GAAG,SAAS,CAAC;IACzB,OAAO,CAAC,WAAW,GAAG,cAAc,CAAC;;IAErC,QAAQ,CAAC,SAAS,GAAG,MAAM,CAAC;IAC5B,UAAU,CAAC,WAAW,EAAE,UAAU,EAAE,CAAC;IACrC,UAAU,CAAC,WAAW,EAAE,OAAO,EAAE,CAAC;IAClC,UAAU,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC;;IAEnC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;IAChC,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;IACjC,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;IAC7B,UAAU,CAAC,KAAK,CAAC,eAAe,GAAG,MAAM,CAAC;IAC1C,UAAU,CAAC,KAAK,CAAC,UAAU,GAAG,YAAY,CAAC;IAC3C,UAAU,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC;IACtC,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;IAC7B,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;IAC7B,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;IAC9B,OAAO,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC;IACnC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;IAC9B,OAAO,CAAC,IAAI,GAAG,EAAE,CAAC;IAClB,OAAO,CAAC,KAAK,CAAC,eAAe,GAAG,MAAM,CAAC;IACvC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;IAC1B,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;IAC9B,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;IAC3B,QAAQ,CAAC,KAAK,CAAC,eAAe,GAAG,oBAAoB,CAAC;IACtD,QAAQ,CAAC,KAAK,CAAC,UAAU,GAAG,CAAC,CAAC;IAC9B,QAAQ,CAAC,KAAK,CAAC,SAAS,GAAG,QAAQ,CAAC;IACpC,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;IAC9B,QAAQ,CAAC,KAAK,CAAC,UAAU,GAAG,YAAY,CAAC;IACzC,QAAQ,CAAC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;IAChC,QAAQ,CAAC,KAAK,CAAC,UAAU,GAAG,KAAK,CAAC;IAClC,QAAQ,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC;;IAEpC,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;MAChD,QAAQ,CAAC,KAAK,CAAC,eAAe,GAAG,oBAAoB,CAAC;KACvD,EAAC;;IAEF,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;MACjD,QAAQ,CAAC,KAAK,CAAC,eAAe,GAAG,oBAAoB,CAAC;KACvD,EAAC;;;IAGF,SAAS,cAAc,EAAE;MACvB,OAAO,CAAC,KAAK,EAAE,CAAC;MAChB,OAAO,CAAC,KAAK,GAAG,EAAE,CAAC;MACnB,UAAU,CAAC,KAAK,GAAG,EAAE,CAAC;MACtB,KAAK,CAAC,wBAAwB,EAAC;KAChC;;;IAGD,SAAS,WAAW,EAAE;MACpB,OAAO,CAAC,KAAK,EAAE,CAAC;MAChB,KAAK,CAAC,4EAA4E,EAAC;KACpF;;IAED,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;MAC5C,IAAI,IAAI,GAAG;QACT,OAAO,EAAE,OAAO,CAAC,KAAK;QACtB,KAAK,EAAE,UAAU,CAAC,KAAK;QACvB,GAAG,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI;QAC1B;;MAED,IAAI,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;QACnB,WAAW,GAAE;QACb,OAAO;OACR;;;MAGD,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC;;;MAGpB,IAAI,OAAO,GAAG,IAAI,cAAc,EAAE,CAAC;MACnC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,sBAAsB,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;MAC/D,OAAO,CAAC,gBAAgB,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;MAC7D,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;;;MAGnC,OAAO,CAAC,kBAAkB,GAAG,WAAW;QACtC,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC;QACpB,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,EAAE;;;UAGxB,IAAI,IAAI,CAAC,MAAM,IAAI,GAAG,EAAE;YACtB,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YACvB,cAAc,EAAE,CAAC;WAClB,IAAI;YACH,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACtB,WAAW,EAAE,CAAC;WACf;;SAEF,IAAI;UACH,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;SAClC;OACF,CAAC;;;KAGH,CAAC,CAAC;;;;;;GAMJ;;;;;CAKF;;AC5LD,0CAA0C;;;;;;;;;;;;"}